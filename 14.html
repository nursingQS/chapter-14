<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pediatric Nursing Flashcards - Chapter 14: Health Problems of Early Childhood</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', 'Arial', sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #fffaf0 0%, #fff5e6 100%);
            min-height: 100vh;
            padding: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }
        
        .container {
            width: 100%;
            max-width: 1200px;
            height: 96vh;
            background: #fffcf5;
            border-radius: 20px;
            box-shadow: 0 15px 40px rgba(255, 165, 0, 0.2);
            overflow: hidden;
            display: flex;
            flex-direction: column;
            border: 3px solid #ff9900;
        }
        
        .header {
            background: linear-gradient(135deg, #ff9900, #ffcc00);
            color: #fffaf0;
            padding: 12px 15px;
            text-align: center;
            position: relative;
            overflow: hidden;
            flex-shrink: 0;
        }
        
        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" width="100" height="100" opacity="0.1"><path d="M20,20 L80,20 L80,80 L20,80 Z" fill="white" stroke="white" stroke-width="2"/><circle cx="50" cy="50" r="20" fill="white"/><path d="M40,40 L60,40 L60,60 L40,60 Z" fill="white"/><path d="M35,65 L65,65" stroke="white" stroke-width="3"/></svg>');
            background-size: 80px 80px;
        }
        
        .header h1 {
            font-size: 1.5rem;
            margin-bottom: 4px;
            position: relative;
            color: #fffaf0;
            line-height: 1.2;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.2);
        }
        
        .header .subtitle {
            font-size: 0.9rem;
            opacity: 0.95;
            position: relative;
            color: #fff5e6;
            margin-bottom: 8px;
            font-weight: 500;
        }
        
        .progress {
            background: #ff9900;
            height: 6px;
            width: 100%;
            flex-shrink: 0;
            border-radius: 0 0 5px 5px;
        }
        
        .progress-bar {
            background: linear-gradient(90deg, #ffcc00, #ff9900);
            height: 100%;
            width: 0%;
            transition: width 0.4s ease;
            border-radius: 0 5px 5px 0;
        }
        
        .section-nav {
            display: flex;
            gap: 6px;
            padding: 8px 10px;
            background: linear-gradient(135deg, #e67300, #ff9900);
            border-bottom: 1px solid #ffcc80;
            flex-shrink: 0;
            overflow-x: auto;
            align-items: center;
            justify-content: center;
        }
        
        .section-btn {
            padding: 5px 10px;
            border: 2px solid #ffcc80;
            background: rgba(255, 255, 255, 0.95);
            color: #e67300;
            border-radius: 15px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            font-size: 0.75rem;
            white-space: nowrap;
            flex-shrink: 0;
            min-width: 120px;
            text-align: center;
        }
        
        .section-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(255, 153, 0, 0.4);
        }
        
        .section-btn.active {
            background: linear-gradient(135deg, #ffcc80, #ff9900);
            color: #fffaf0;
            border-color: #e67300;
            box-shadow: 0 6px 12px rgba(255, 153, 0, 0.5);
        }
        
        .flashcard {
            padding: 12px;
            flex: 1;
            display: flex;
            flex-direction: column;
            background: #fffcf5;
            overflow: hidden;
            min-height: 0;
        }
        
        .question-container {
            display: flex;
            gap: 10px;
            align-items: flex-start;
            margin-bottom: 8px;
            background: white;
            padding: 12px;
            border-radius: 10px;
            border-left: 6px solid #ffcc80;
            box-shadow: 0 4px 8px rgba(255, 165, 0, 0.1);
            flex-shrink: 0;
        }
        
        .question-icon {
            background: linear-gradient(135deg, #e67300, #ff9900);
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1rem;
            font-weight: bold;
            flex-shrink: 0;
            box-shadow: 0 4px 8px rgba(230, 115, 0, 0.4);
        }
        
        .question {
            font-size: 0.9rem;
            line-height: 1.4;
            color: #cc6600;
            flex-grow: 1;
            font-weight: 500;
            overflow-wrap: break-word;
            hyphens: auto;
        }
        
        .multiple-select-indicator {
            background: #ff6600;
            color: white;
            padding: 3px 8px;
            border-radius: 15px;
            font-size: 0.7rem;
            font-weight: bold;
            margin-left: 6px;
            white-space: nowrap;
            box-shadow: 0 3px 6px rgba(255, 102, 0, 0.3);
            flex-shrink: 0;
        }
        
        .options {
            display: flex;
            flex-direction: column;
            gap: 6px;
            margin-bottom: 8px;
            flex: 1;
            overflow: hidden;
            min-height: 0;
        }
        
        .option {
            padding: 8px 10px;
            border: 2px solid #ffe0b3;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            background: white;
            display: flex;
            align-items: flex-start;
            gap: 10px;
            font-size: 0.85rem;
            line-height: 1.3;
            flex-shrink: 0;
            min-height: 45px;
        }
        
        .option:hover {
            background: #fff5e6;
            border-color: #ffcc80;
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(255, 204, 128, 0.2);
        }
        
        .option-letter {
            background: #ffe0b3;
            color: #e67300;
            width: 25px;
            height: 25px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            flex-shrink: 0;
            transition: all 0.3s ease;
            font-size: 0.8rem;
            border: 2px solid #ffcc80;
        }
        
        /* CORRECT - ALWAYS GREEN */
        .option.correct {
            background: #d4edda;
            border-color: #28a745;
            color: #155724;
        }
        
        .option.correct .option-letter {
            background: #28a745;
            color: white;
            border-color: #28a745;
        }
        
        /* INCORRECT - ALWAYS RED */
        .option.incorrect {
            background: #f8d7da;
            border-color: #dc3545;
            color: #721c24;
        }
        
        .option.incorrect .option-letter {
            background: #dc3545;
            color: white;
            border-color: #dc3545;
        }
        
        .option.selected {
            background: #fff5e6;
            border-color: #ffcc80;
            color: #e67300;
        }
        
        .option.selected .option-letter {
            background: #ffcc80;
            color: #e67300;
            border-color: #ff9900;
        }
        
        .feedback {
            padding: 8px 10px;
            border-radius: 8px;
            margin-bottom: 8px;
            display: none;
            align-items: center;
            gap: 8px;
            font-weight: 600;
            font-size: 0.85rem;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            flex-shrink: 0;
        }
        
        .feedback.correct {
            background: #d4edda;
            border: 3px solid #28a745;
            color: #155724;
            display: flex;
        }
        
        .feedback.incorrect {
            background: #f8d7da;
            border: 3px solid #dc3545;
            color: #721c24;
            display: flex;
        }
        
        .feedback-icon {
            font-size: 1.2rem;
            flex-shrink: 0;
        }
        
        .navigation {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 12px;
            background: #ffe0b3;
            border-top: 2px solid #ffcc80;
            flex-shrink: 0;
            gap: 8px;
        }
        
        .counter {
            font-weight: bold;
            color: #e67300;
            font-size: 0.9rem;
            background: white;
            padding: 5px 10px;
            border-radius: 20px;
            border: 2px solid #ffcc80;
            box-shadow: 0 3px 6px rgba(0,0,0,0.1);
            flex-shrink: 0;
        }
        
        .btn {
            padding: 8px 12px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 0.8rem;
            white-space: nowrap;
            box-shadow: 0 4px 8px rgba(0,0,0,0.15);
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #e67300, #ff9900);
            color: white;
        }
        
        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 16px rgba(230, 115, 0, 0.4);
        }
        
        .btn-secondary {
            background: linear-gradient(135deg, #ff9900, #e67300);
            color: white;
        }
        
        .btn-secondary:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 16px rgba(255, 153, 0, 0.4);
        }
        
        .btn-warning {
            background: linear-gradient(135deg, #ffcc00, #ff9900);
            color: #212529;
        }
        
        .btn-warning:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 16px rgba(255, 204, 0, 0.4);
        }
        
        .btn-danger {
            background: linear-gradient(135deg, #ff3300, #cc2900);
            color: white;
        }
        
        .btn-danger:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 16px rgba(255, 51, 0, 0.4);
        }
        
        .rationale {
            background: linear-gradient(135deg, #fff3cd, #ffeaa7);
            border: 3px solid #ffcc00;
            border-radius: 10px;
            padding: 10px;
            margin-top: 8px;
            display: none;
            box-shadow: 0 4px 12px rgba(255, 204, 0, 0.2);
            flex-shrink: 0;
            overflow: hidden;
            max-height: 120px;
        }
        
        .rationale.show {
            display: block;
            animation: slideIn 0.5s ease;
        }
        
        .rationale h4 {
            color: #ff9900;
            margin-bottom: 6px;
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 0.9rem;
        }
        
        .rationale p {
            color: #856404;
            line-height: 1.4;
            font-size: 0.8rem;
        }
        
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .stats {
            display: flex;
            gap: 6px;
            justify-content: center;
            margin-top: 4px;
            flex-wrap: wrap;
            flex-shrink: 0;
        }
        
        .stat {
            background: rgba(255, 255, 255, 0.2);
            padding: 4px 8px;
            border-radius: 15px;
            font-size: 0.7rem;
            white-space: nowrap;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }
        
        .cancel-selection {
            background: linear-gradient(135deg, #ff3300, #cc2900);
            color: white;
            margin: 0 auto 8px auto;
            display: none;
            box-shadow: 0 4px 10px rgba(255, 51, 0, 0.3);
            flex-shrink: 0;
        }
        
        .cancel-selection:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 16px rgba(255, 51, 0, 0.4);
        }
        
        .cancel-selection.show {
            display: flex;
        }
        
        .multiple-select-instructions {
            text-align: center;
            color: #ff3300;
            font-weight: 600;
            margin-bottom: 8px;
            font-size: 0.8rem;
            background: #fff3cd;
            padding: 6px;
            border-radius: 8px;
            border: 2px solid #ffeaa7;
            flex-shrink: 0;
        }
        
        .matching-container {
            background: linear-gradient(135deg, #fffcf5, #fff5e6);
            border-radius: 8px;
            padding: 10px;
            border: 2px solid #ffe0b3;
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            min-height: 0;
        }
        
        .matching-question {
            font-size: 0.85rem;
            color: #cc6600;
            font-weight: 500;
            margin-bottom: 10px;
            padding: 8px;
            background: white;
            border-radius: 8px;
            border: 2px solid #ffe0b3;
            overflow: hidden;
            text-overflow: ellipsis;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            max-height: 3em;
            flex-shrink: 0;
        }
        
        .matching-options {
            flex: 1;
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
            gap: 5px;
            overflow: hidden;
            padding: 2px;
            min-height: 0;
        }
        
        .matching-option {
            padding: 8px;
            border: 2px dashed #ffcc80;
            border-radius: 6px;
            cursor: pointer;
            text-align: center;
            transition: all 0.3s ease;
            font-size: 0.8rem;
            font-weight: 500;
            color: #ff9900;
            background: white;
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 40px;
            overflow: hidden;
            line-height: 1.2;
        }
        
        .matching-option:hover {
            background: #fff5e6;
            border-style: solid;
            border-color: #ffcc80;
        }
        
        .matching-option.correct {
            background: linear-gradient(135deg, #d4edda, #c3e6cb);
            border-color: #28a745;
            border-style: solid;
            color: #155724;
        }
        
        .matching-option.incorrect {
            background: linear-gradient(135deg, #f8d7da, #f5c6cb);
            border-color: #dc3545;
            border-style: solid;
            color: #721c24;
        }
        
        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none !important;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1) !important;
        }
        
        /* Remove all scrollbars */
        .options,
        .matching-options,
        .rationale,
        .container,
        .flashcard,
        body {
            overflow: hidden !important;
            -ms-overflow-style: none !important;
            scrollbar-width: none !important;
        }
        
        .options::-webkit-scrollbar,
        .matching-options::-webkit-scrollbar,
        .rationale::-webkit-scrollbar {
            display: none !important;
            width: 0 !important;
            height: 0 !important;
        }
        
        @media (max-width: 768px) {
            .container {
                height: 98vh;
            }
            
            .section-btn {
                min-width: 100px;
                font-size: 0.7rem;
                padding: 4px 8px;
            }
            
            .matching-options {
                grid-template-columns: 1fr;
            }
            
            .header {
                padding: 10px 12px;
            }
            
            .header h1 {
                font-size: 1.2rem;
            }
            
            .navigation {
                padding: 8px 10px;
                flex-wrap: wrap;
                justify-content: center;
                gap: 6px;
            }
            
            .counter {
                order: -1;
                width: 100%;
                text-align: center;
                margin-bottom: 4px;
                font-size: 0.8rem;
            }
            
            .btn {
                padding: 6px 10px;
                font-size: 0.75rem;
            }
            
            .question {
                font-size: 0.85rem;
            }
            
            .option {
                font-size: 0.8rem;
                padding: 6px 8px;
                min-height: 40px;
            }
            
            .question-icon {
                width: 35px;
                height: 35px;
                font-size: 0.9rem;
            }
            
            .option-letter {
                width: 22px;
                height: 22px;
                font-size: 0.75rem;
            }
        }
        
        @media (max-height: 700px) {
            .container {
                height: 99vh;
            }
            
            .header {
                padding: 8px 10px;
            }
            
            .header h1 {
                font-size: 1.1rem;
            }
            
            .header .subtitle {
                font-size: 0.8rem;
            }
            
            .question-container {
                padding: 10px;
                margin-bottom: 6px;
            }
            
            .question {
                font-size: 0.8rem;
                line-height: 1.3;
            }
            
            .option {
                padding: 6px 8px;
                min-height: 35px;
                font-size: 0.75rem;
            }
            
            .navigation {
                padding: 6px 8px;
            }
            
            .rationale {
                max-height: 80px;
                padding: 8px;
            }
            
            .feedback {
                padding: 6px 8px;
                font-size: 0.75rem;
            }
            
            .option-letter {
                width: 20px;
                height: 20px;
                font-size: 0.7rem;
            }
            
            .stats {
                display: none;
            }
        }
        
        @media (max-height: 600px) {
            .question-container {
                padding: 8px;
            }
            
            .question-icon {
                width: 30px;
                height: 30px;
                font-size: 0.8rem;
            }
            
            .option {
                min-height: 30px;
                padding: 4px 6px;
                font-size: 0.7rem;
            }
            
            .option-letter {
                width: 18px;
                height: 18px;
                font-size: 0.65rem;
            }
            
            .btn {
                padding: 5px 8px;
                font-size: 0.7rem;
            }
            
            .rationale {
                max-height: 60px;
                padding: 6px;
            }
            
            .rationale p {
                font-size: 0.7rem;
                line-height: 1.3;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>‚ö†Ô∏è Chapter 14: Health Problems of Early Childhood</h1>
            <div class="subtitle">Poisoning & Child Abuse Prevention Theme - Caution Colors</div>
            <div class="stats">
                <div class="stat">üìö 25 MC Questions</div>
                <div class="stat">ü©∫ Poisoning Focus</div>
                <div class="stat">üö® Abuse Recognition</div>
                <div class="stat">üíä Medication Safety</div>
            </div>
        </div>
        <div class="progress">
            <div class="progress-bar" id="progressBar"></div>
        </div>
        
        <div class="section-nav">
            <button class="section-btn active" onclick="setSection('multiple-choice')">Multiple Choice (25)</button>
            <button class="section-btn" onclick="setSection('multiple-response')">Multiple Response (10)</button>
            <button class="section-btn" onclick="setSection('completion')">Math Calculations (4)</button>
            <button class="section-btn" onclick="setSection('all')">All Mixed (39)</button>
        </div>
        
        <div class="flashcard">
            <div class="question-container">
                <div class="question-icon" id="questionNumber">1</div>
                <div class="question" id="question"></div>
                <div class="multiple-select-indicator" id="multipleSelectIndicator" style="display: none;">Multiple Answers</div>
            </div>
            
            <div class="multiple-select-instructions" id="multipleSelectInstructions" style="display: none;">
                üí° Select ALL correct answers
            </div>
            
            <div class="options" id="options"></div>
            
            <div class="matching-container" id="matchingContainer" style="display: none;">
                <div class="matching-question" id="matchingQuestion"></div>
                <div class="matching-options" id="matchingOptions"></div>
            </div>
            
            <button class="btn cancel-selection" id="cancelBtn" onclick="cancelSelection()">
                üîÑ Reset
            </button>
            
            <div class="feedback" id="feedback">
                <div class="feedback-icon" id="feedbackIcon"></div>
                <div id="feedbackText"></div>
            </div>
            <div class="rationale" id="rationale">
                <h4>üí° Rationale:</h4>
                <p id="rationaleText"></p>
            </div>
        </div>
        
        <div class="navigation">
            <button class="btn btn-secondary" id="prevBtn" onclick="previousCard()">
                ‚¨ÖÔ∏è Prev
            </button>
            <div class="counter" id="counter">1/25</div>
            <button class="btn btn-warning" id="submitBtn" onclick="submitAnswer()" style="display: none;">
                ‚úÖ Submit
            </button>
            <button class="btn btn-primary" id="nextBtn" onclick="nextCard()">
                Next ‚û°Ô∏è
            </button>
        </div>
    </div>

    <script>
        // Chapter 14 Data - Health Problems of Early Childhood
        const sections = {
            'multiple-choice': [
                {
                    question: "A father calls the clinic because he found his young daughter squirting Visine eyedrops into her mouth. What is the most appropriate nursing action?",
                    options: [
                        "Reassure the father that Visine is harmless.",
                        "Direct him to seek immediate medical treatment.",
                        "Recommend inducing vomiting with ipecac.",
                        "Advise him to dilute Visine by giving his daughter several glasses of water to drink."
                    ],
                    correct: 1,
                    rationale: "Visine is a sympathomimetic and if ingested may cause serious consequences. Medical treatment is necessary. Inducing vomiting is no longer recommended for ingestions. Dilution will not decrease risk."
                },
                {
                    question: "The nurse suspects that a child has ingested some type of poison. What clinical manifestation would be most suggestive that the poison was a corrosive product?",
                    options: [
                        "Tinnitus",
                        "Disorientation",
                        "Stupor, lethargy, and coma",
                        "Edema of the lips, tongue, and pharynx"
                    ],
                    correct: 3,
                    rationale: "Edema of the lips, tongue, and pharynx indicates a corrosive ingestion. Tinnitus is indicative of aspirin ingestion. Corrosives do not act on the central nervous system."
                },
                {
                    question: "A young boy is found squirting lighter fluid into his mouth. His father calls the emergency department. The nurse taking the call should know that the primary danger is what?",
                    options: [
                        "Hepatic dysfunction",
                        "Dehydration secondary to vomiting",
                        "Esophageal stricture and shock",
                        "Bronchitis and chemical pneumonia"
                    ],
                    correct: 3,
                    rationale: "Lighter fluid is a hydrocarbon. The immediate danger is aspiration. Acetaminophen overdose, not hydrocarbons, causes hepatic dysfunction. Dehydration is not the primary danger. Esophageal stricture is a late or chronic consequence of hydrocarbon ingestion."
                },
                {
                    question: "What is a clinical manifestation of acetaminophen poisoning?",
                    options: [
                        "Hyperpyrexia",
                        "Hepatic involvement",
                        "Severe burning pain in stomach",
                        "Drooling and inability to clear secretions"
                    ],
                    correct: 1,
                    rationale: "Hepatic involvement is the third stage of acetaminophen poisoning. Hyperpyrexia is a severe elevation in body temperature and is not related to acetaminophen poisoning. Acetaminophen does not cause burning pain in stomach and does not pose an airway threat."
                },
                {
                    question: "An awake, alert 4-year-old child has just arrived at the emergency department after an ingestion of aspirin at home. The practitioner has ordered activated charcoal. The nurse administers charcoal in which manner?",
                    options: [
                        "Giving half of the solution and then repeating the other half in 1 hour",
                        "Mixing with a flavorful beverage in an opaque container with a straw",
                        "Serving it in a clear plastic cup so the child can see how much has been drunk",
                        "Administering it through a nasogastric tube because the child will not drink it because of the taste"
                    ],
                    correct: 1,
                    rationale: "Although activated charcoal can be mixed with a flavorful sugar-free beverage, it will be black and resemble mud. When it is served in an opaque container, the child will not have any preconceived ideas about its being distasteful. The ability to see the charcoal solution may affect the child's desire to drink the solution. The child should be encouraged to drink the solution all at once. The nasogastric tube would be traumatic. It should be used only in children who cannot be cooperative or those without a gag reflex."
                },
                {
                    question: "What is a significant secondary prevention nursing activity for lead poisoning?",
                    options: [
                        "Chelation therapy",
                        "Screening children for blood lead levels",
                        "Removing lead-based paint from older homes",
                        "Questioning parents about ethnic remedies containing lead"
                    ],
                    correct: 1,
                    rationale: "Screening children for lead poisoning is an important secondary prevention activity. Screening does not prevent the initial exposure of the child to lead. It can lead to identification and treatment of children who are exposed. Chelation therapy is treatment, not prevention. Removing lead-based paints from older homes before children are affected is primary prevention. Questioning parents about ethnic remedies containing lead is part of the assessment to determine the potential source of lead."
                },
                {
                    question: "What is an important nursing consideration when a child is hospitalized for chelation therapy to treat lead poisoning?",
                    options: [
                        "Maintain bed rest.",
                        "Maintain isolation precautions.",
                        "Keep an accurate record of intake and output.",
                        "Institute measures to prevent skeletal fracture."
                    ],
                    correct: 2,
                    rationale: "The iron chelates are excreted though the kidneys. Adequate hydration is essential. Periodic measurement of renal function is done. Bed rest is not necessary. Often the chelation therapy is done on an outpatient basis. Chelation therapy is not infectious or dangerous. Isolation is not indicated. Skeletal weakness does not result from high levels of lead."
                },
                {
                    question: "What is the most common form of child maltreatment?",
                    options: [
                        "Sexual abuse",
                        "Child neglect",
                        "Physical abuse",
                        "Emotional abuse"
                    ],
                    correct: 1,
                    rationale: "Child neglect, which is characterized by the failure to provide for the child's basic needs, is the most common form of child maltreatment. Sexual abuse, physical abuse, and emotional abuse are individually not as common as neglect."
                },
                {
                    question: "A child is admitted with a suspected diagnosis of Munchausen syndrome by proxy (MSBP). What is an important consideration in the care of this child?",
                    options: [
                        "Monitoring the parents whenever they are with the child",
                        "Reassuring the parents that the cause of the disorder will be found",
                        "Teaching the parents how to obtain necessary specimens",
                        "Supporting the parents as they cope with diagnosis of a chronic illness"
                    ],
                    correct: 0,
                    rationale: "MSBP refers to an illness that one person fabricates or induces in another. The child must be continuously observed for development of symptoms to determine the cause. MSBP is caused by an individual harming the child for the purpose of gaining attention. Nursing staff should obtain all specimens for analyzing. This minimizes the possibility of the abuser contaminating the sample. The child must be supported through the diagnosis of MSBP. The abuser must be identified and the child protected from that individual."
                },
                {
                    question: "When only one child is abused in a family, the abuse is usually a result of what?",
                    options: [
                        "The child is the firstborn.",
                        "The child is the same gender as the abusing parent.",
                        "The parent abuses the child to avoid showing favoritism.",
                        "The parent is unable to deal with the child's behavioral style."
                    ],
                    correct: 3,
                    rationale: "The child unintentionally contributes to the abuse. The fit or compatibility between the child's temperament and the parent's ability to deal with that behavior style is an important predictor. Birth order and gender can contribute to abuse, but there is not a specific birth order or gender relationship that is indicative of abuse. Being the firstborn or the same gender as the abuser is not linked to child abuse. Avoidance of favoritism is not usually a cause of abuse."
                },
                {
                    question: "The parents of a 7-year-old boy tell the nurse that lately he has been cruel to their family pets and actually caused physical harm. The nurse's recommendation should be based on remembering what?",
                    options: [
                        "This is an expected behavior at this age.",
                        "This is a warning sign of a serious problem.",
                        "This is harmless venting of anger and frustration.",
                        "This is common in children who are physically abused."
                    ],
                    correct: 1,
                    rationale: "Cruelty to family pets is not an expected behavior. Hurting animals can be one of the earliest symptoms of a conduct disorder. Abusing animals does not dissipate violent emotions; rather, the acts may fuel the abusive behaviors. Referral for evaluation is essential. This behavior may be seen in emotional abuse or neglect, not physical abuse."
                },
                {
                    question: "A 3-month-old infant dies shortly after arrival to the emergency department. The infant has subdural and retinal hemorrhages but no external signs of trauma. What should the nurse suspect?",
                    options: [
                        "Unintentional injury",
                        "Shaken baby syndrome",
                        "Congenital neurologic problem",
                        "Sudden infant death syndrome (SIDS)"
                    ],
                    correct: 1,
                    rationale: "Shaken baby syndrome causes internal bleeding but may have no external signs. Unintentional injury would not cause these injuries. With unintentional injuries, external signs are usually present. Congenital neurologic problems would usually have signs of abnormal neurologic anatomy. SIDS does not usually have identifiable injuries."
                },
                {
                    question: "What statement is correct about young children who report sexual abuse?",
                    options: [
                        "They may exhibit various behavioral manifestations.",
                        "In more than half the cases, the child has fabricated the story.",
                        "Their stories should not be believed unless other evidence is apparent.",
                        "They should be able to retell the story the same way to another person."
                    ],
                    correct: 0,
                    rationale: "Victims of sexual abuse have no typical profile. The child may exhibit various behavioral manifestations, none of which is diagnostic for sexual abuse. When children report potentially sexually abusive experiences, their reports need to be taken seriously. Other children in the household also need to be evaluated. In children who are sexually abused, it is often difficult to identify other evidence. In one study, approximately 96% of children who were sexually abused had normal genital and anal findings. The ability to retell the story is partly dependent on the child's cognitive level. Children who repeatedly tell identical stories may have been coached."
                },
                {
                    question: "What is probably the most important criterion on which to base the decision to report suspected child abuse?",
                    options: [
                        "Inappropriate response of child",
                        "Inappropriate parental concern for the degree of injury",
                        "Absence of parents for questioning about child's injuries",
                        "Incompatibility between the history and injury observed"
                    ],
                    correct: 3,
                    rationale: "Conflicting stories about the accident are the most indicative red flags of abuse. The child or caregiver may have an inappropriate response, but this is subjective. Parents should be questioned at some point during the investigation."
                },
                {
                    question: "The nurse is caring for a child with suspected ingestion of some type of poison. What action should the nurse take next after initiating cardiopulmonary resuscitation (CPR)?",
                    options: [
                        "Empty the mouth of pills, plants, or other material.",
                        "Question the victim and witness.",
                        "Place the child in a side-lying position.",
                        "Call poison control."
                    ],
                    correct: 0,
                    rationale: "Emptying the mouth of any leftover pills, plants, or other ingested material is the next step after assessment and initiation of CPR if needed. Questioning the victim and witnesses, calling poison control, and placing the child in a side-lying position are follow-up steps."
                },
                {
                    question: "The nurse is teaching parents of a preschool child strategies to implement when the child delays going to bed. What strategy should the nurse recommend?",
                    options: [
                        "Use consistent bedtime rituals.",
                        "Give in to attention-seeking behavior.",
                        "Take the child into the parent's bed for an hour.",
                        "Allow the child to stay up past the decided bedtime."
                    ],
                    correct: 0,
                    rationale: "For children who delay going to bed, a recommended approach involves a consistent bedtime ritual and emphasizing the normalcy of this type of behavior in young children. Parents should ignore attention-seeking behavior, and the child should not be taken into the parent's bed or allowed to stay up past a reasonable hour."
                },
                {
                    question: "A child with acetaminophen (Tylenol) poisoning has been admitted to the emergency department. What antidote does the nurse anticipate being prescribed?",
                    options: [
                        "Carnitine (Carnitor)",
                        "Fomepizole (Antizol)",
                        "Deferoxamine (Desferal)",
                        "N-acetylcysteine (Mucomyst)"
                    ],
                    correct: 3,
                    rationale: "The antidote for acetaminophen (Tylenol) poisoning is N-acetylcysteine (Mucomyst). Carnitine (Carnitor) is an antidote for valproic acid (Depakote), fomepizole (Antizol) is the antidote for methanol poisoning, and deferoxamine (Desferal) is the antidote for iron poisoning."
                },
                {
                    question: "A child with diazepam (Valium) poisoning has been admitted to the emergency department. What antidote does the nurse anticipate being prescribed?",
                    options: [
                        "Succimer (Chemet)",
                        "EDTA (Versenate)",
                        "Flumazenil (Romazicon)",
                        "Octreotide acetate (Sandostatin)"
                    ],
                    correct: 2,
                    rationale: "The antidote for diazepam (Valium) poisoning is flumazenil (Romazicon). Succimer (Chemet) and EDTA (Versenate) are antidotes for heavy metal poisoning. Octreotide acetate (Sandostatin) is an antidote for sulfonylurea poisoning."
                },
                {
                    question: "A child is admitted to the hospital with lesions on his abdomen that appear like cigarette burns. What should accurate documentation by the nurse include?",
                    options: [
                        "Two unhealed lesions are on the child's abdomen.",
                        "Two round 4-mm lesions are on the child's lower abdomen.",
                        "Two round symmetrical lesions are on the child's lower abdomen.",
                        "Two round lesions on the child's abdomen that appear to be cigarette burns."
                    ],
                    correct: 1,
                    rationale: "Burn documentation should include the location, pattern, demarcation lines, and presence of eschar or blisters. The option that includes the size of the lesions is the most accurate."
                },
                {
                    question: "What do inflicted immersion burns often appear as?",
                    options: [
                        "Partial-thickness, asymmetrical burns",
                        "Splash pattern burns on hands or feet",
                        "Any splash burn with dry linear marks",
                        "Sharply demarcated, symmetrical burns"
                    ],
                    correct: 3,
                    rationale: "Immersion burns are sharply demarcated symmetrical burns. Asymmetrical burns and splash burns are often accidental."
                },
                {
                    question: "A child has been admitted to the hospital with a blood lead level of 72 mcg/dL. What treatment should the nurse anticipate?",
                    options: [
                        "Referral to social services",
                        "Initiation of chelation therapy",
                        "Follow-up testing within 1 month",
                        "Aggressive environmental intervention"
                    ],
                    correct: 1,
                    rationale: "Severe lead toxicity (lead level ‚â•70 mcg/dL) requires immediate inpatient chelation treatment. Referral to social service and follow-up in 1 month are prescribed for lead levels of 15 to 19 mcg/dL. Aggressive environmental intervention would be initiated after chelation treatments."
                },
                {
                    question: "The nurse is teaching parents of preschoolers about plants that are poisonous. What plant should the nurse include in the teaching session?",
                    options: [
                        "Azalea",
                        "Begonia",
                        "Boston fern",
                        "Asparagus fern"
                    ],
                    correct: 0,
                    rationale: "All parts of the azalea are poisonous. Begonias, Boston ferns, and asparagus ferns are nonpoisonous plants."
                },
                {
                    question: "A child with corrosive poisoning is being admitted to the emergency department. What clinical manifestation does the nurse expect to assess on this child?",
                    options: [
                        "Nausea and vomiting",
                        "Alterations in sensorium, such as lethargy",
                        "Severe burning pain in the mouth, throat, and stomach",
                        "Respiratory symptoms of acute pulmonary involvement"
                    ],
                    correct: 2,
                    rationale: "Severe burning pain in the mouth, throat, and stomach is a clinical manifestation of corrosive poisoning. Nausea and vomiting; alterations in sensorium, such as lethargy; and respiratory symptoms of acute pulmonary involvement are clinical manifestations of hydrocarbon poisoning."
                },
                {
                    question: "A child with acetylsalicylic acid (aspirin) poisoning is being admitted to the emergency department. What early clinical manifestation does the nurse expect to assess on this child?",
                    options: [
                        "Hematemesis",
                        "Hematochezia",
                        "Hyperglycemia",
                        "Hyperventilation"
                    ],
                    correct: 3,
                    rationale: "An early clinical manifestation of acetylsalicylic acid (aspirin) poisoning is hyperventilation. Hematemesis, hematochezia, and hyperglycemia are clinical manifestations of iron poisoning."
                },
                {
                    question: "A child with cyanide poisoning has been admitted to the emergency department. What antidote does the nurse anticipate being prescribed for the child?",
                    options: [
                        "Atropine",
                        "Glucagon",
                        "Amyl nitrate",
                        "Naloxone (Narcan)"
                    ],
                    correct: 2,
                    rationale: "Amyl nitrate is the antidote for cyanide poisoning. Atropine is an antidote for organophosphate poisoning, glucagon is an antidote for a beta-blocker poisoning, and naloxone (Narcan) is an antidote for an opioid poisoning."
                }
            ],
            
            'multiple-response': [
                {
                    question: "The nurse is teaching parents of preschool children consequences of inadequate sleep. What should the nurse include in the teaching session? (Select all that apply.)",
                    options: [
                        "Behavior changes",
                        "Increased appetite",
                        "Difficulty concentrating",
                        "Poor control of emotions",
                        "Impaired learning ability"
                    ],
                    correct: [0, 2, 3, 4],
                    rationale: "Consequences of inadequate sleep include daytime tiredness, behavior changes, hyperactivity, difficulty concentrating, impaired learning ability, poor control of emotions and impulses, and strain on family relationships. Increased appetite is not a consequence of inadequate sleep."
                },
                {
                    question: "The nurse is administering activated charcoal to a preschool child with acetaminophen (Tylenol) poisoning. What potential complications from the use of activated charcoal should the nurse plan to assess for? (Select all that apply.)",
                    options: [
                        "Diarrhea",
                        "Vomiting",
                        "Fluid retention",
                        "Intestinal obstruction"
                    ],
                    correct: [1, 3],
                    rationale: "Potential complications from the use of activated charcoal include vomiting and possible aspiration, constipation, and intestinal obstruction. Diarrhea and fluid retention are not potential complications of activated charcoal administration."
                },
                {
                    question: "What can the nurse suggest to families to reduce blood lead levels? (Select all that apply.)",
                    options: [
                        "Do not store food in open cans.",
                        "Ensure the child eats regular meals.",
                        "Mix formula with hot water from the tap.",
                        "Vacuum hard-surfaced floors and window wells.",
                        "Wash and dry the child's hands and face frequently."
                    ],
                    correct: [0, 1, 4],
                    rationale: "To reduce blood lead levels, the family should ensure the child eats regular meals because more lead is absorbed on an empty stomach. The child's hands and face should be washed and dried frequently, especially before eating. Food should not be stored in open cans, particularly if cans are imported. Hot water dissolves lead more quickly than cold water and thus contains higher levels of lead. Hot water should not be used to mix formula. Hard-surfaced floors or window sills or wells should not be vacuumed because this spreads dust."
                },
                {
                    question: "What are symptoms of abusive head trauma (AHT) in the more severe form that may be present? (Select all that apply.)",
                    options: [
                        "Seizures",
                        "Posturing",
                        "Tachypnea",
                        "Tachycardia",
                        "Altered level of consciousness"
                    ],
                    correct: [0, 1, 4],
                    rationale: "In more severe forms, presenting symptoms of abusive head trauma may include seizures, posturing, alterations in level of consciousness, apnea, bradycardia, or death."
                },
                {
                    question: "The nurse is teaching parents of preschool-aged children strategies to prevent sexual abuse. What should the nurse include in the teaching session? (Select all that apply.)",
                    options: [
                        "Back up a child's right to say no.",
                        "Don't take what your child says too seriously.",
                        "Take a second look at signals of potential danger.",
                        "Don't be too detailed about examples of sexual assault.",
                        "Remind children that even nice people sometimes do mean things."
                    ],
                    correct: [0, 2, 4],
                    rationale: "To provide protection and preparation from sexual abuse, parents should back up a child's right to say no, take a second look at signals of potential danger, and remind children that even nice people sometimes do mean things. Parents should take what children say seriously and they should give specific definitions and examples of sexual assault."
                },
                {
                    question: "A parent asks the nurse about the characteristics of a nightmare. What response should the nurse give to the parent? (Select all that apply.)",
                    options: [
                        "Nightmares are scary dreams.",
                        "The child can describe the nightmare.",
                        "The child is reassured by your presence.",
                        "Nightmares occur usually 1 to 4 hours after falling asleep.",
                        "Nightmares take place during nonrapid eye movement sleep"
                    ],
                    correct: [0, 1, 2],
                    rationale: "Nightmares are scary dreams, the child can describe the nightmare, and the child is reassured by a parent's presence. Sleep terrors occur usually 1 to 4 hours after falling asleep, but nightmares occur in the second half of sleep. Sleep terrors occur during nonrapid eye movement sleep, but nightmares occur during rapid eye movement sleep."
                },
                {
                    question: "A parent asks the nurse about the characteristics of a sleep terror. What response should the nurse give to the parent? (Select all that apply.)",
                    options: [
                        "The child screams during the sleep terror.",
                        "Return to sleep is delayed because of persistent fear.",
                        "The night terror occurs during the second half of night.",
                        "The child has no memory of the dream with a sleep terror.",
                        "The child is not aware of another's presence during a sleep terror."
                    ],
                    correct: [0, 3, 4],
                    rationale: "During sleep terrors, the child screams and has no memory of the dream. The child is not aware of another's presence during a sleep terror. Return to sleep is usually rapid with a sleep terror, but it is delayed with a nightmare. The sleep terror occurs usually within 1 to 4 hours of sleep, but nightmares occur during the second half of night."
                },
                {
                    question: "What are classified as hydrocarbon poisons? (Select all that apply.)",
                    options: [
                        "Bleach",
                        "Gasoline",
                        "Turpentine",
                        "Lighter fluid",
                        "Oven cleaners"
                    ],
                    correct: [1, 2, 3],
                    rationale: "Gasoline, turpentine, and lighter fluid are classified as hydrocarbon poisons. Bleach and oven cleaners are classified as corrosive poisons."
                },
                {
                    question: "What identified characteristics occur more frequently in parents who abuse their children? (Select all that apply.)",
                    options: [
                        "Older parents",
                        "Socially isolated",
                        "Middle class parents",
                        "Single-parent families",
                        "Few supportive relationships"
                    ],
                    correct: [1, 3, 4],
                    rationale: "Abusive families are often socially isolated and have few supportive relationships. Single-parent families are at higher risk for abuse. Younger parents more often are abusers of their children. Abusive parents have stressors such as low-income circumstances, with little education, and are not middle class parents."
                },
                {
                    question: "What are classified as corrosive poisons? (Select all that apply.)",
                    options: [
                        "Batteries",
                        "Paint thinner",
                        "Drain cleaners",
                        "Mineral seed oil",
                        "Mildew remover"
                    ],
                    correct: [0, 2, 4],
                    rationale: "Batteries, drain cleaners, and mildew removers are classified as corrosive poisons. Paint thinner and mineral seed oil are classified as hydrocarbon poisons."
                }
            ],
            
            'completion': [
                {
                    question: "A health care provider prescribes flumazenil (Romazicon), 0.2 mg IV once, stat, for benzodiazepine poisoning. The medication label states: Flumazenil (Romazicon), 1 mg/10 mL. How many milliliters will the nurse prepare to administer one dose?",
                    options: ["0.5 mL", "1 mL", "2 mL", "5 mL"],
                    correct: 2,
                    rationale: "Using the formula: Desired dose √∑ Dose on hand √ó Volume on hand = 0.2 mg √∑ 1 mg √ó 10 mL = 2 mL. The correct amount is 2 mL."
                },
                {
                    question: "A health care provider prescribes acetylcysteine (Mucomyst), 70 mg/kg per nasogastric tube times one, stat, for acetaminophen overdose. The child weighs 20 kg. The medication label states: Acetylcysteine (Mucomyst), 100 mg/10 mL. How many milliliters will the nurse prepare to administer one dose?",
                    options: ["70 mL", "100 mL", "140 mL", "200 mL"],
                    correct: 2,
                    rationale: "First, calculate the total dose: 70 mg/kg √ó 20 kg = 1400 mg. Then calculate the volume: 1400 mg √∑ 100 mg √ó 10 mL = 140 mL. The correct amount is 140 mL."
                },
                {
                    question: "A health care provider prescribes naloxone (Narcan), 0.01 mg/kg IV times one, stat, for opioid overdose. The child weighs 16 kg. The medication label states: Naloxone (Narcan), 0.4 mg/1 mL. How many milliliters will the nurse prepare to administer one dose?",
                    options: ["0.2 mL", "0.4 mL", "0.8 mL", "1.6 mL"],
                    correct: 1,
                    rationale: "First, calculate the total dose: 0.01 mg/kg √ó 16 kg = 0.16 mg. Then calculate the volume: 0.16 mg √∑ 0.4 mg √ó 1 mL = 0.4 mL. The correct amount is 0.4 mL."
                },
                {
                    question: "A health care provider prescribes activated charcoal (Actidose), 25 g orally every 6 hours for acetaminophen overdose. The medication label states: Activated charcoal (Actidose), 50 g/240 mL. How many milliliters will the nurse prepare to administer one dose?",
                    options: ["60 mL", "100 mL", "120 mL", "200 mL"],
                    correct: 2,
                    rationale: "Using the formula: 25 g √∑ 50 g √ó 240 mL = 120 mL. The correct amount is 120 mL."
                }
            ],
            
            'all': []
        };

        // Combine all questions for the 'all' section
        sections['all'] = [
            ...sections['multiple-choice'].map(q => ({...q, section: 'multiple-choice'})),
            ...sections['multiple-response'].map(q => ({...q, section: 'multiple-response'})),
            ...sections['completion'].map(q => ({...q, section: 'completion', isCompletion: true}))
        ];

        let currentSection = 'multiple-choice';
        let currentQuestion = 0;
        let selectedOption = null;
        let selectedOptions = [];
        let isSubmitted = false;
        let answers = {
            'multiple-choice': Array(sections['multiple-choice'].length).fill(null),
            'multiple-response': Array(sections['multiple-response'].length).fill({selected: [], submitted: false}),
            'completion': Array(sections['completion'].length).fill(null),
            'all': Array(sections['all'].length).fill(null)
        };

        function setSection(section) {
            currentSection = section;
            currentQuestion = 0;
            selectedOption = null;
            selectedOptions = [];
            isSubmitted = false;
            
            document.querySelectorAll('.section-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            loadQuestion();
        }

        function isMultipleResponseQuestion() {
            if (currentSection === 'all') {
                const questionData = getCurrentQuestionData();
                return questionData?.section === 'multiple-response' || Array.isArray(questionData?.correct);
            }
            return currentSection === 'multiple-response';
        }

        function isCompletionSection() {
            if (currentSection === 'all') {
                const questionData = getCurrentQuestionData();
                return questionData?.isCompletion || questionData?.section === 'completion';
            }
            return currentSection === 'completion';
        }

        function getCurrentQuestionData() {
            if (currentSection === 'all') {
                return sections['all'][currentQuestion] || null;
            } else {
                return sections[currentSection][currentQuestion];
            }
        }

        function loadQuestion() {
            const questionData = getCurrentQuestionData();
            
            if (!questionData) return;
            
            const isCompletion = isCompletionSection();
            const isMultipleResponse = isMultipleResponseQuestion();
            
            // Update UI elements visibility
            document.getElementById('matchingContainer').style.display = 'none';
            document.getElementById('options').style.display = 'flex';
            document.getElementById('multipleSelectIndicator').style.display = isMultipleResponse ? 'block' : 'none';
            document.getElementById('multipleSelectInstructions').style.display = isMultipleResponse ? 'block' : 'none';
            document.getElementById('cancelBtn').classList.remove('show');
            document.getElementById('submitBtn').style.display = isMultipleResponse ? 'flex' : 'none';
            document.getElementById('questionNumber').textContent = currentQuestion + 1;
            
            let totalQuestions = getTotalQuestions();
            
            const progress = ((currentQuestion + 1) / totalQuestions) * 100;
            document.getElementById('progressBar').style.width = `${progress}%`;
            document.getElementById('counter').textContent = `${currentQuestion + 1}/${totalQuestions}`;
            
            document.getElementById('question').textContent = questionData.question;
            loadOptions(questionData);
            
            document.getElementById('feedback').style.display = 'none';
            document.getElementById('rationale').classList.remove('show');
            
            document.getElementById('prevBtn').disabled = currentQuestion === 0;
            const isLastQuestion = currentQuestion >= totalQuestions - 1;
            document.getElementById('nextBtn').textContent = isLastQuestion ? 'Finish ‚û°Ô∏è' : 'Next ‚û°Ô∏è';
            document.getElementById('nextBtn').disabled = true;
            
            // Load saved answer state
            const storedAnswer = answers[currentSection][currentQuestion];
            if (storedAnswer !== null && storedAnswer !== undefined) {
                if (isMultipleResponse) {
                    selectedOptions = storedAnswer.selected || [];
                    isSubmitted = storedAnswer.submitted || false;
                    
                    if (isSubmitted) {
                        showFeedbackForMultipleResponse(questionData);
                        document.getElementById('nextBtn').disabled = false;
                        document.getElementById('submitBtn').disabled = true;
                    } else {
                        highlightSelectedOptionsForMultipleResponse();
                        document.getElementById('submitBtn').disabled = selectedOptions.length === 0;
                        document.getElementById('nextBtn').disabled = false;
                        if (selectedOptions.length > 0) {
                            document.getElementById('cancelBtn').classList.add('show');
                        }
                    }
                } else if (isCompletion) {
                    selectedOption = storedAnswer;
                    highlightSelectedOption(storedAnswer, questionData);
                    showFeedback(storedAnswer, questionData);
                    document.getElementById('nextBtn').disabled = false;
                    document.getElementById('cancelBtn').classList.add('show');
                } else {
                    selectedOption = storedAnswer;
                    highlightSelectedOption(storedAnswer, questionData);
                    showFeedback(storedAnswer, questionData);
                    document.getElementById('nextBtn').disabled = false;
                    document.getElementById('cancelBtn').classList.add('show');
                }
            } else {
                selectedOption = null;
                selectedOptions = [];
                isSubmitted = false;
                if (isMultipleResponse) {
                    document.getElementById('submitBtn').disabled = true;
                }
            }
        }

        function loadOptions(questionData) {
            const optionsContainer = document.getElementById('options');
            optionsContainer.innerHTML = '';
            
            if (questionData.options && questionData.options.length > 0) {
                questionData.options.forEach((option, index) => {
                    const optionElement = document.createElement('div');
                    optionElement.className = 'option';
                    optionElement.innerHTML = `
                        <div class="option-letter">${String.fromCharCode(65 + index)}</div>
                        <div class="option-text">${option}</div>
                    `;
                    optionElement.onclick = () => selectOption(index, questionData);
                    optionsContainer.appendChild(optionElement);
                });
            } else {
                const optionElement = document.createElement('div');
                optionElement.className = 'option';
                optionElement.innerHTML = `
                    <div class="option-letter">A</div>
                    <div class="option-text">No options available for this question</div>
                `;
                optionsContainer.appendChild(optionElement);
            }
        }

        function selectOption(index, questionData) {
            if (!questionData) questionData = getCurrentQuestionData();
            
            if (isMultipleResponseQuestion()) {
                handleMultipleResponseSelect(index, questionData);
            } else {
                handleSingleSelect(index, questionData);
            }
        }

        function handleSingleSelect(index, questionData) {
            if (!questionData) questionData = getCurrentQuestionData();
            
            answers[currentSection][currentQuestion] = index;
            selectedOption = index;
            
            highlightSelectedOption(index, questionData);
            showFeedback(index, questionData);
            document.getElementById('nextBtn').disabled = false;
            document.getElementById('cancelBtn').classList.add('show');
        }

        function handleMultipleResponseSelect(index, questionData) {
            if (!questionData) questionData = getCurrentQuestionData();
            if (isSubmitted) return;
            
            const optionIndex = selectedOptions.indexOf(index);
            if (optionIndex === -1) {
                selectedOptions.push(index);
            } else {
                selectedOptions.splice(optionIndex, 1);
            }
            
            const options = document.querySelectorAll('.option');
            options.forEach((option, i) => {
                option.classList.remove('selected', 'correct', 'incorrect');
                if (selectedOptions.includes(i)) {
                    option.classList.add('selected');
                }
            });
            
            if (!answers[currentSection][currentQuestion]) {
                answers[currentSection][currentQuestion] = {selected: [], submitted: false};
            }
            answers[currentSection][currentQuestion].selected = selectedOptions;
            answers[currentSection][currentQuestion].submitted = false;
            
            document.getElementById('submitBtn').disabled = selectedOptions.length === 0;
            document.getElementById('nextBtn').disabled = false;
            document.getElementById('cancelBtn').classList.toggle('show', selectedOptions.length > 0);
        }

        function highlightSelectedOption(index, questionData) {
            if (!questionData) questionData = getCurrentQuestionData();
            
            const options = document.querySelectorAll('.option');
            
            options.forEach((option, i) => {
                option.classList.remove('selected', 'correct', 'incorrect');
                
                if (i === index) {
                    if (i === questionData.correct) {
                        option.classList.add('correct');
                    } else {
                        option.classList.add('incorrect');
                        if (questionData.correct !== undefined) {
                            options[questionData.correct].classList.add('correct');
                        }
                    }
                }
            });
        }

        function highlightSelectedOptionsForMultipleResponse() {
            const options = document.querySelectorAll('.option');
            
            options.forEach((option, i) => {
                option.classList.remove('selected', 'correct', 'incorrect');
                if (selectedOptions.includes(i)) {
                    option.classList.add('selected');
                }
            });
        }

        function submitAnswer() {
            if (selectedOptions.length === 0) return;
            
            isSubmitted = true;
            
            if (!answers[currentSection][currentQuestion]) {
                answers[currentSection][currentQuestion] = {selected: [], submitted: false};
            }
            answers[currentSection][currentQuestion].submitted = true;
            
            const questionData = getCurrentQuestionData();
            showFeedbackForMultipleResponse(questionData);
            document.getElementById('nextBtn').disabled = false;
            document.getElementById('submitBtn').disabled = true;
            document.getElementById('cancelBtn').classList.remove('show');
        }

        function showFeedback(index, questionData) {
            if (!questionData) questionData = getCurrentQuestionData();
            
            const feedback = document.getElementById('feedback');
            const feedbackIcon = document.getElementById('feedbackIcon');
            const feedbackText = document.getElementById('feedbackText');
            const rationale = document.getElementById('rationale');
            const rationaleText = document.getElementById('rationaleText');
            
            if (index === questionData.correct) {
                feedback.className = 'feedback correct';
                feedbackIcon.textContent = '‚úÖ';
                feedbackText.textContent = 'Correct! Well done.';
            } else {
                feedback.className = 'feedback incorrect';
                feedbackIcon.textContent = '‚ùå';
                const correctLetter = String.fromCharCode(65 + questionData.correct);
                feedbackText.textContent = `Incorrect. Correct: ${correctLetter}`;
            }
            
            feedback.style.display = 'flex';
            rationaleText.textContent = questionData.rationale;
            rationale.classList.add('show');
        }

        function showFeedbackForMultipleResponse(questionData) {
            if (!questionData) questionData = getCurrentQuestionData();
            
            const feedback = document.getElementById('feedback');
            const feedbackIcon = document.getElementById('feedbackIcon');
            const feedbackText = document.getElementById('feedbackText');
            const rationale = document.getElementById('rationale');
            const rationaleText = document.getElementById('rationaleText');
            
            const allCorrectSelected = questionData.correct.every(c => selectedOptions.includes(c));
            const noIncorrectSelected = selectedOptions.every(s => questionData.correct.includes(s));
            
            const options = document.querySelectorAll('.option');
            options.forEach((option, i) => {
                option.classList.remove('selected', 'correct', 'incorrect');
                if (questionData.correct.includes(i)) {
                    option.classList.add('correct');
                }
                if (selectedOptions.includes(i) && !questionData.correct.includes(i)) {
                    option.classList.add('incorrect');
                }
            });
            
            if (allCorrectSelected && noIncorrectSelected) {
                feedback.className = 'feedback correct';
                feedbackIcon.textContent = '‚úÖ';
                feedbackText.textContent = 'Perfect! All correct selected.';
            } else if (allCorrectSelected && !noIncorrectSelected) {
                feedback.className = 'feedback incorrect';
                feedbackIcon.textContent = '‚ö†Ô∏è';
                feedbackText.textContent = 'Almost! All correct + some incorrect.';
            } else if (!allCorrectSelected && noIncorrectSelected) {
                feedback.className = 'feedback incorrect';
                feedbackIcon.textContent = '‚ö†Ô∏è';
                feedbackText.textContent = 'Partially correct! Some correct, missed others.';
            } else {
                feedback.className = 'feedback incorrect';
                feedbackIcon.textContent = '‚ùå';
                feedbackText.textContent = 'Incorrect. Missed correct & selected incorrect.';
            }
            
            feedback.style.display = 'flex';
            rationaleText.textContent = questionData.rationale;
            rationale.classList.add('show');
        }

        function cancelSelection() {
            const questionData = getCurrentQuestionData();
            
            if (isMultipleResponseQuestion()) {
                selectedOptions = [];
                isSubmitted = false;
                
                const options = document.querySelectorAll('.option');
                options.forEach(option => {
                    option.classList.remove('selected', 'correct', 'incorrect');
                });
                
                if (answers[currentSection][currentQuestion]) {
                    answers[currentSection][currentQuestion] = {selected: [], submitted: false};
                }
                
                document.getElementById('nextBtn').disabled = true;
                document.getElementById('submitBtn').disabled = true;
                document.getElementById('feedback').style.display = 'none';
                document.getElementById('rationale').classList.remove('show');
                document.getElementById('cancelBtn').classList.remove('show');
            } else if (isCompletionSection()) {
                answers[currentSection][currentQuestion] = null;
                selectedOption = null;
                
                const options = document.querySelectorAll('.option');
                options.forEach(option => {
                    option.classList.remove('selected', 'correct', 'incorrect');
                });
                
                document.getElementById('feedback').style.display = 'none';
                document.getElementById('rationale').classList.remove('show');
                document.getElementById('nextBtn').disabled = true;
                document.getElementById('cancelBtn').classList.remove('show');
            } else {
                answers[currentSection][currentQuestion] = null;
                selectedOption = null;
                
                const options = document.querySelectorAll('.option');
                options.forEach(option => {
                    option.classList.remove('selected', 'correct', 'incorrect');
                });
                
                document.getElementById('feedback').style.display = 'none';
                document.getElementById('rationale').classList.remove('show');
                document.getElementById('nextBtn').disabled = true;
                document.getElementById('cancelBtn').classList.remove('show');
            }
        }

        function nextCard() {
            const totalQuestions = getTotalQuestions();
            
            if (currentQuestion < totalQuestions - 1) {
                currentQuestion++;
                selectedOption = null;
                selectedOptions = [];
                isSubmitted = false;
                loadQuestion();
            } else {
                let correctCount = 0;
                let totalAnswered = 0;
                
                Object.keys(answers).forEach(section => {
                    answers[section].forEach((answer, index) => {
                        if (answer !== null && answer !== undefined) {
                            totalAnswered++;
                            const questionData = getQuestionData(section, index);
                            
                            if (Array.isArray(questionData?.correct)) {
                                if (answer.submitted && Array.isArray(answer.selected)) {
                                    const allCorrect = questionData.correct.every(c => answer.selected.includes(c));
                                    const noIncorrect = answer.selected.every(s => questionData.correct.includes(s));
                                    if (allCorrect && noIncorrect) correctCount++;
                                }
                            } else if (questionData?.isCompletion || questionData?.section === 'completion') {
                                if (answer === questionData.correct) correctCount++;
                            } else {
                                if (answer === questionData?.correct) correctCount++;
                            }
                        }
                    });
                });
                
                alert(`Quiz completed!\n\nAnswered: ${totalAnswered}\nCorrect: ${correctCount}\n\nClick OK to restart.`);
                
                currentSection = 'multiple-choice';
                currentQuestion = 0;
                selectedOption = null;
                selectedOptions = [];
                isSubmitted = false;
                answers = {
                    'multiple-choice': Array(sections['multiple-choice'].length).fill(null),
                    'multiple-response': Array(sections['multiple-response'].length).fill({selected: [], submitted: false}),
                    'completion': Array(sections['completion'].length).fill(null),
                    'all': Array(sections['all'].length).fill(null)
                };
                
                setSection('multiple-choice');
            }
        }

        function previousCard() {
            if (currentQuestion > 0) {
                currentQuestion--;
                const storedAnswer = answers[currentSection][currentQuestion];
                
                if (isMultipleResponseQuestion()) {
                    selectedOptions = storedAnswer?.selected || [];
                    isSubmitted = storedAnswer?.submitted || false;
                } else {
                    selectedOption = storedAnswer;
                }
                
                loadQuestion();
            }
        }

        function getTotalQuestions() {
            if (currentSection === 'all') {
                return sections['all'].length;
            } else {
                return sections[currentSection].length;
            }
        }

        function getQuestionData(section, index) {
            if (section === 'all') {
                return sections['all'][index];
            } else {
                return sections[section][index];
            }
        }

        // Initialize
        setSection('multiple-choice');
        
        // Keyboard shortcuts
        document.addEventListener('keydown', function(event) {
            if (event.key >= '1' && event.key <= '5') {
                const index = parseInt(event.key) - 1;
                const questionData = getCurrentQuestionData();
                selectOption(index, questionData);
            } else if (event.key >= 'a' && event.key <= 'e') {
                const index = event.key.charCodeAt(0) - 97;
                const questionData = getCurrentQuestionData();
                selectOption(index, questionData);
            } else if (event.key === 'Enter' && isMultipleResponseQuestion()) {
                if (selectedOptions.length > 0 && !isSubmitted) {
                    submitAnswer();
                }
            } else if (event.key === 'ArrowLeft') {
                if (!document.getElementById('prevBtn').disabled) {
                    previousCard();
                }
            } else if (event.key === 'ArrowRight') {
                if (!document.getElementById('nextBtn').disabled) {
                    nextCard();
                }
            } else if (event.key === ' ' || event.key === 'Spacebar') {
                if (!document.getElementById('nextBtn').disabled && !isMultipleResponseQuestion()) {
                    nextCard();
                }
            } else if (event.key === 'Escape') {
                cancelSelection();
            }
        });
    </script>
</body>
</html>